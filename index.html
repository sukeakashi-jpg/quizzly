<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Quizzly</title>
<style>
  :root {
    --beige: #f6efe6;
    --navy: #0b1c33;
    --text: #0b1c33;
  }

  body {
    font-family: "Newsreader", serif;
    background: var(--beige);
    color: var(--text);
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    justify-content: center;
    align-items: center;
    text-align: center;
    transition: all 0.3s ease;
  }

  h1 {
    font-size: 2.2em;
    color: var(--navy);
    margin-bottom: 1em;
  }

  .container {
    background: #ffffffbb;
    padding: 2em;
    border-radius: 20px;
    box-shadow: 0 4px 20px #0001;
    max-width: 400px;
    width: 90%;
  }

  button {
    background: var(--navy);
    color: var(--beige);
    border: none;
    border-radius: 12px;
    padding: 12px 20px;
    font-size: 1em;
    margin-top: 1em;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s ease;
  }

  button:hover {
    transform: scale(1.03);
    background: #142850;
  }

  .hidden {
    display: none;
  }

  .quote {
    font-style: italic;
    opacity: 0.8;
    margin-top: 1em;
  }

  .lang-switch {
    position: absolute;
    top: 15px;
    right: 15px;
    background: transparent;
    color: var(--navy);
    border: 2px solid var(--navy);
    border-radius: 8px;
    padding: 6px 10px;
    font-size: 0.9em;
    cursor: pointer;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .fade {
    animation: fadeIn 1s ease forwards;
  }
</style>
</head>
<body>
  <button id="langBtn" class="lang-switch">EN</button>

  <div id="loading" class="container fade">
    <h1>Quizzly</h1>
    <p id="quote" class="quote"></p>
  </div>

  <div id="app" class="container hidden fade">
    <h1 id="question">Question</h1>
    <div id="answers"></div>
    <button id="nextBtn" class="hidden"></button>
  </div>

<script>
  // === SOUNDS ===
  const sounds = {
    click: new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_3c9ccae22e.mp3"),
    chime: new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_b3e0bfb44a.mp3"),
    lock: new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_5a5b3c3c6d.mp3"),
  };
  for (let s in sounds) sounds[s].volume = 0.3;

  // === DATA ===
  const state = {
    lang: "en",
    current: null,
    users: {},
    questions: {
      en: [
        { q: "What is the capital of France?", a: ["Paris", "Rome", "Madrid", "Berlin"], correct: 0 },
      ],
      es: [
        { q: "¿Cuál es la capital de Francia?", a: ["París", "Roma", "Madrid", "Berlín"], correct: 0 },
      ]
    },
    quotes: [
      "The obstacle is the way. — Marcus Aurelius",
      "You have power over your mind — not outside events.",
      "We suffer more in imagination than in reality. — Seneca",
      "Waste no more time arguing what a good man should be. Be one. — Marcus Aurelius",
      "First say to yourself what you would be; and then do what you have to do. — Epictetus"
    ]
  };

  const langBtn = document.getElementById("langBtn");
  const loading = document.getElementById("loading");
  const quoteEl = document.getElementById("quote");
  const app = document.getElementById("app");
  const questionEl = document.getElementById("question");
  const answersEl = document.getElementById("answers");
  const nextBtn = document.getElementById("nextBtn");

  // === SHOW RANDOM STOIC QUOTE ===
  quoteEl.textContent = state.quotes[Math.floor(Math.random() * state.quotes.length)];

  // === LANGUAGE TOGGLE ===
  langBtn.addEventListener("click", () => {
    sounds.click.play();
    state.lang = state.lang === "en" ? "es" : "en";
    langBtn.textContent = state.lang.toUpperCase();
    renderQuestion();
  });

  // === SIMULATE LOADING SCREEN ===
  setTimeout(() => {
    loading.classList.add("hidden");
    app.classList.remove("hidden");
    renderQuestion();
  }, 2500);

  // === CHECK LAST PLAY DATE ===
  function hasPlayedToday() {
    const last = localStorage.getItem("lastPlayed");
    if (!last) return false;
    const today = new Date().toDateString();
    return last === today;
  }

  function markPlayedToday() {
    localStorage.setItem("lastPlayed", new Date().toDateString());
  }

  // === RENDER QUESTION ===
  function renderQuestion() {
    const played = hasPlayedToday();
    answersEl.innerHTML = "";
    nextBtn.classList.add("hidden");

    if (played) {
      questionEl.textContent =
        state.lang === "en"
          ? "You’ve already answered today’s question. Come back tomorrow."
          : "Ya respondiste la pregunta de hoy. Vuelve mañana.";
      return;
    }

    const qData = state.questions[state.lang][0];
    questionEl.textContent = qData.q;
    qData.a.forEach((ans, i) => {
      const btn = document.createElement("button");
      btn.textContent = ans;
      btn.onclick = () => checkAnswer(i, qData.correct);
      answersEl.appendChild(btn);
    });
  }

  // === CHECK ANSWER ===
  function checkAnswer(selected, correct) {
    sounds.click.play();
    Array.from(answersEl.children).forEach((b, i) => {
      b.disabled = true;
      if (i === correct) b.style.background = "#4b8b3b";
      if (i === selected && i !== correct) b.style.background = "#b03b3b";
    });

    if (selected === correct) {
      sounds.chime.play();
      nextBtn.textContent = state.lang === "en" ? "Great job!" : "¡Bien hecho!";
    } else {
      sounds.lock.play();
      nextBtn.textContent = state.lang === "en" ? "Try again tomorrow." : "Inténtalo de nuevo mañana.";
    }

    markPlayedToday();
    nextBtn.classList.remove("hidden");
  }
</script>
</body>
</html>
